spring.application.name=batch

# ============================================================
# CONFIGURACIÓN DE MÚLTIPLES DATASOURCES
# ============================================================
# DataSource A - MySQL (por defecto - puerto 3308 expuesto por Docker)
spring.datasource-a.url=jdbc:mysql://localhost:3308/spring_batch_db?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource-a.username=root
spring.datasource-a.password=Evertec.2025
spring.datasource-a.driver-class-name=com.mysql.cj.jdbc.Driver

# DataSource B - PostgreSQL
spring.datasource-b.url=jdbc:postgresql://localhost:5433/spring_batch_db
spring.datasource-b.username=postgres
spring.datasource-b.password=Evertec.2025
spring.datasource-b.driver-class-name=org.postgresql.Driver

# ============================================================
# ACTIVACIÓN DE PERFIL - LOCAL
# ============================================================
# DESCOMENTA para usar application-local.properties (desarrollo local)
# COMENTA   para usar application-docker.properties (docker-compose)
#
spring.profiles.active=local

# Puerto del servidor
server.port=8080

# Configuración de JPA/Hibernate (por defecto)
# CRÍTICO: Deshabilitar la inicialización automática de JPA durante el inicio
# Los EntityManagerFactory se crearán dinámicamente durante la ejecución de jobs
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
# CRÍTICO: No validar schema durante el inicio
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false
spring.jpa.properties.hibernate.jdbc.use_get_generated_keys=false
# Estrategia de naming: convierte nombres de tablas/columnas a minúsculas con guiones bajos
# RegistroCSV -> registrocsv, fechaProceso -> fecha_proceso
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy
# Deshabilitar la inicialización automática de Spring Data JPA durante el inicio
spring.data.jpa.repositories.bootstrap-mode=lazy

# Configuración de Spring Batch
spring.batch.job.enabled=false
spring.batch.jdbc.initialize-schema=always

# Ruta del directorio de datos (sobrescrita por cada perfil)
file.data.path=src/main/resources/data

# Ruta del archivo CSV (puede ser sobrescrita por perfil)
file.input=src/main/resources/data/registros.csv

